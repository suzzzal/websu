<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="title" content="Happy Anniversary Website" />

    <title>Titli Anniversary</title>

    <link rel="stylesheet" href="styles.css" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />

    <link
      href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500;700&family=Poppins:wght@400;600&display=swap"
      rel="stylesheet"
    />

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  </head>

  <body>
    <div id="wrapper">
      <div class="flag__birthday">
        <img src="./images/1.png" alt="" width="350" class="flag__left" />
        <img src="./images/1.png" alt="" width="350" class="flag__right" />
      </div>

      <div class="content">
        <div class="left">
          <div class="title">
            <!-- HAPPY -->
            <h1 class="happy">
              <span style="--t: 4s">H</span>
              <span style="--t: 4.2s">a</span>
              <span style="--t: 4.4s">p</span>
              <span style="--t: 4.6s">p</span>
              <span style="--t: 4.8s">y</span>
            </h1>

            <!-- ANNIVERSARY -->
            <h1 class="birthday">
              <span style="--t: 5s">A</span>
              <span style="--t: 5.2s">n</span>
              <span style="--t: 5.4s">n</span>
              <span style="--t: 5.6s">i</span>
              <span style="--t: 5.8s">v</span>
              <span style="--t: 6s">e</span>
              <span style="--t: 6.2s">r</span>
              <span style="--t: 6.4s">s</span>
              <span style="--t: 6.6s">a</span>
              <span style="--t: 6.8s">r</span>
              <span style="--t: 7s">y</span>
            </h1>

            <div class="hat">
              <img src="./images/hat.png" alt="" width="130" />
            </div>
          </div>

          <div class="date__of__birth">
            <span></span>
          </div>

          <div class="btn">
            <button id="btn__letter">
              <div class="mail">
                Click Here Titli
                <i class="fa-regular fa-envelope"></i>
              </div>
            </button>
          </div>
        </div>

        <div class="right">
          <div class="box__account">
            <div class="image">
              <img src="./images/unnamed.png" alt="" />
            </div>

            <div class="name">
              <i class="fa-solid fa-heart"></i>
              <span>Dear Titli</span>
              <i class="fa-solid fa-heart"></i>
            </div>

            <div class="balloon_one">
              <img width="100px" src="./images/balloon1.png" alt="" />
            </div>
            <div class="balloon_two">
              <img width="100px" src="./images/balloon2.png" alt="" />
            </div>
          </div>

          <!-- ROTATING TEXT -->
          <div class="cricle">
            <div class="text__cricle">
              <span style="--i: 1">h</span>
              <span style="--i: 2">a</span>
              <span style="--i: 3">p</span>
              <span style="--i: 4">p</span>
              <span style="--i: 5">y</span>
              <span style="--i: 6">-</span>
              <span style="--i: 7">a</span>
              <span style="--i: 8">n</span>
              <span style="--i: 9">n</span>
              <span style="--i: 10">i</span>
              <span style="--i: 11">v</span>
              <span style="--i: 12">e</span>
              <span style="--i: 13">r</span>
              <span style="--i: 14">s</span>
              <span style="--i: 15">a</span>
              <span style="--i: 16">r</span>
              <span style="--i: 17">y</span>
              <span style="--i: 18">-</span>
            </div>
            <i class="fa-solid fa-heart"></i>
          </div>
        </div>
      </div>

      <!-- DECORATIONS -->
      <div class="decorate_star star1" style="--t: 15s"></div>
      <div class="decorate_star star2" style="--t: 15.2s"></div>
      <div class="decorate_star star3" style="--t: 15.4s"></div>
      <div class="decorate_star star4" style="--t: 15.6s"></div>
      <div class="decorate_star star5" style="--t: 15.8s"></div>

      <div class="decorate_flower--one" style="--t: 15s">
        <img width="20" src="./images/decorate_flower.png" alt="" />
      </div>
      <div class="decorate_flower--two" style="--t: 15.3s">
        <img width="20" src="./images/decorate_flower.png" alt="" />
      </div>
      <div class="decorate_flower--three" style="--t: 15.6s">
        <img width="20" src="./images/decorate_flower.png" alt="" />
      </div>

      <div class="decorate_bottom">
        <img src="./images/decorate.png" alt="" width="100" />
      </div>

      <div class="smiley__icon">
        <img src="./images/smiley_icon.png" alt="" width="100" />
      </div>

      <!-- POPUP MAIL -->
      <div class="boxMail">
        <i class="fa-solid fa-xmark"></i>

        <div class="boxMail-container">
          <div class="card1">
            <div class="userImg">
              <img src="images/unamed.png" alt="" />
            </div>

            <h4 class="username">
              To: Titli ðŸ’–<span class="underline"></span>
            </h4>

            <h3>Happy Anniversary</h3>

            <div class="imageCute">
              <img src="cute1.png" alt="" />
            </div>
          </div>

          <div class="card2">
            <div class="card2-content">
              <h3>To You!</h3>

              <h2>
                HAPPPPPY ANNIVERSARY MY TITLI!!!!! One whole year is finished
                and I feel so happy, I LOVE YOU. I clearly remember the park
                wala day , that day you became so special to me. Spending time
                with you is my favorite thing in the world. We roam together,
                laugh together, eat together ( achhi achii jagah aur khayenge
                iss year), and will make so many memories. Even small moments
                with you feel big to me. Thank you for holding my hand, for
                caring for me, and for always staying with me. I am very glad
                that I spent this one beautiful year with you. I love you so
                much, my Titli ðŸ’•
              </h2>

              <div class="imageCute2">
                <img src="cute2.png" alt="" />
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- LETTER POPUP (ADDED, nothing removed) -->
      <div class="box__letter" style="display: none">
        <div class="letter__border" style="display: none">
          <div class="letter">
            <div class="close">âœ–</div>

            <h2 class="title__letter"></h2>

            <div class="content__letter">
              <div class="left">
                <img id="heart__letter" src="./images/heart.png" width="120" />
                <img
                  class="heart heart_1"
                  src="./images/heart.png"
                  width="20"
                />
                <img
                  class="heart heart_2"
                  src="./images/heart.png"
                  width="20"
                />
                <img
                  class="heart heart_3"
                  src="./images/heart.png"
                  width="20"
                />
                <img
                  class="heart heart_4"
                  src="./images/heart.png"
                  width="20"
                />
              </div>

              <div class="right">
                <div class="love__img">
                  <img src="./images/love.png" width="120" />
                </div>

                <!-- THIS WAS MISSING -->
                <div class="text__letter">
                  <p></p>
                </div>

                <img id="mewmew" src="./images/mew.png" width="80" />
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- SCRIPT -->
    <script>
      let datetxt = "17 January";

      let datatxtletter =
        "My love. Today we celebrate our beautiful journey together. Every moment with you is special to me. Thank you for all the love, laughter, and memories we share. I wish us many more years of happiness and togetherness. Happy Anniversary to us. ðŸ’•";

      let titleLetter = "Happy Anniversary";

      let charArrDate = datetxt.split("");
      let charArrDateLetter = datatxtletter.split("");
      let charArrTitle = titleLetter.split("");

      let currentIndex = 0;
      let currentIndexLetter = 0;
      let currentIndexTitle = 0;

      let date__of__birth = document.querySelector(".date__of__birth span");
      let text__letter = document.querySelector(".text__letter p");

      setTimeout(function () {
        timeDatetxt = setInterval(function () {
          if (currentIndex < charArrDate.length) {
            date__of__birth.textContent += charArrDate[currentIndex];
            currentIndex++;
          } else {
            let i = document.createElement("i");
            i.className = "fa-solid fa-star";
            document.querySelector(".date__of__birth").prepend(i);
            document
              .querySelector(".date__of__birth")
              .appendChild(i.cloneNode(true));
            clearInterval(timeDatetxt);
          }
        }, 100);
      }, 12000);

      var intervalContent;
      var intervalTitle;

      $("#btn__letter").on("click", function () {
        $(".box__letter").slideDown();

        setTimeout(function () {
          $(".letter__border").slideDown();
        }, 1000);

        setTimeout(function () {
          intervalTitle = setInterval(function () {
            if (currentIndexTitle < charArrTitle.length) {
              document.querySelector(".title__letter").textContent +=
                charArrTitle[currentIndexTitle];

              let i = document.createElement("i");
              i.className = "fa-solid fa-heart";
              document.querySelector(".title__letter").appendChild(i);

              currentIndexTitle++;
            } else {
              clearInterval(intervalTitle);
            }
          }, 100);
        }, 2000);

        setTimeout(function () {
          document.querySelector("#heart__letter").classList.add("animationOp");
          document.querySelector(".love__img").classList.add("animationOp");
          document.querySelector("#mewmew").classList.add("animationOp");
        }, 2800);

        setTimeout(function () {
          document.querySelectorAll(".heart").forEach((item) => {
            item.classList.add("animation");
          });
        }, 3500);

        setTimeout(function () {
          intervalContent = setInterval(function () {
            if (currentIndexLetter < charArrDateLetter.length) {
              text__letter.textContent += charArrDateLetter[currentIndexLetter];
              currentIndexLetter++;
            } else {
              clearInterval(intervalContent);
            }
          }, 50);
        }, 6000);
      });

      let mailBox = document.querySelector(".mail");
      let boxmail = document.querySelector(".boxMail");
      var close = document.querySelector(".fa-xmark");

      mailBox.onclick = function () {
        mailBox.classList.toggle("active");
        boxmail.classList.add("active");
      };

      close.addEventListener("click", function () {
        boxmail.classList.remove("active");
        // close the letter popup also
        $(".letter__border").slideUp();
        $(".box__letter").slideUp();

        // reset text so it works again next time
        document.querySelector(".title__letter").textContent = "";
        document.querySelector(".text__letter p").textContent = "";
        currentIndexLetter = 0;
        currentIndexTitle = 0;
      });
    </script>
  </body>
</html>
